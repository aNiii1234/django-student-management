{% extends 'base-minimal.html' %}
{% load static %}

{% block title %}é¦–é¡µ - å­¦ç”Ÿç®¡ç†ç³»ç»Ÿ{% endblock %}

{% block content %}
<div class="container" style="max-width: 1400px; margin: 0 auto; padding: 0 1rem;">
    <!-- é¡¶éƒ¨å¯¼èˆªæ ï¼ˆç²¾ç®€ç‰ˆï¼‰ -->
    <div style="display: flex; justify-content: space-between; align-items: center; padding: 1rem 0; margin-bottom: 1.5rem;">
        <div style="display: flex; align-items: center; gap: 0.8rem;">
            <span style="font-size: 1.8rem; font-weight: 700; color: var(--primary);">ğŸ“ æ™ºæ…§å­¦ç”Ÿç®¡ç†ç³»ç»Ÿ</span>
        </div>
        {% if user.is_authenticated %}
        <div style="display: flex; align-items: center; gap: 1.5rem;">
            <span style="color: var(--text-secondary);">æ¬¢è¿, {{ user.get_full_name|default:user.username }}</span>
            <a href="{% url 'accounts:logout' %}" style="color: var(--danger); font-size: 0.9rem;">é€€å‡ºç™»å½•</a>
        </div>
        {% endif %}
    </div>

    <!-- è‹±é›„åŒºåŸŸï¼ˆç²¾ç®€ç‰ˆï¼‰ -->
    <div class="hero-section" style="background: linear-gradient(135deg, var(--primary), var(--primary-light)); color: white; border-radius: 1rem; padding: 2.5rem 2rem; margin-bottom: 2rem; text-align: center; position: relative; overflow: hidden;">
        <div style="position: absolute; top: 0; left: 0; right: 0; bottom: 0; opacity: 0.1;">
            <div style="position: absolute; top: 10%; left: 10%; font-size: 7rem;">ğŸ“š</div>
            <div style="position: absolute; top: 60%; right: 10%; font-size: 5rem;">ğŸ“</div>
        </div>

        <div style="position: relative; z-index: 1;">
            <h1 style="font-size: 2.2rem; font-weight: 700; margin-bottom: 0.8rem; text-shadow: 0 2px 4px rgba(0,0,0,0.2);">
                {% if user.is_authenticated %}
                    é«˜æ•ˆç®¡ç† Â· æ™ºæ…§æ•™å­¦
                {% else %}
                    å…¨æ–¹ä½å­¦ç”Ÿä¿¡æ¯ç®¡ç†å¹³å°
                {% endif %}
            </h1>
            <p style="font-size: 1.1rem; margin-bottom: 1.5rem; opacity: 0.9; line-height: 1.5; max-width: 800px; margin-left: auto; margin-right: auto;">
                {% if user.is_authenticated %}
                    ä¸€ç«™å¼ç®¡ç†å­¦ç”Ÿæ¡£æ¡ˆã€è¯¾ç¨‹é€‰è¯¾ã€æˆç»©åˆ†æç­‰æ ¸å¿ƒä¸šåŠ¡ï¼Œæå‡æ•™è‚²ç®¡ç†æ•ˆç‡
                {% else %}
                    åŠ©åŠ›æ•™è‚²æ•°å­—åŒ–è½¬å‹ï¼Œå®ç°å­¦ç”Ÿç®¡ç†å…¨æµç¨‹ä¿¡æ¯åŒ–ã€æ™ºèƒ½åŒ–
                {% endif %}
            </p>

            {% if not user.is_authenticated %}
                <div style="display: flex; gap: 1rem; justify-content: center; flex-wrap: wrap;">
                    <a href="{% url 'accounts:login' %}" class="btn btn-lg" style="background: white; color: var(--primary); font-weight: 600; padding: 0.8rem 2rem;">
                        ç«‹å³ç™»å½•
                    </a>
                    <a href="{% url 'accounts:register' %}" class="btn btn-lg" style="background: transparent; color: white; border: 2px solid white; padding: 0.8rem 2rem;">
                        è´¦å·æ³¨å†Œ
                    </a>
                </div>
            {% endif %}
        </div>
    </div>

    {% if user.is_authenticated %}
        <!-- æ•°æ®æ¦‚è§ˆå¡ç‰‡ -->
        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1.2rem; margin-bottom: 2.5rem;">
            <div class="stat-card" style="background: #f0f8fb; border-radius: 0.8rem; padding: 1.5rem; border: 1px solid #e8f4f8;">
                <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 1rem;">
                    <div>
                        <p style="color: var(--text-secondary); font-size: 0.95rem; margin: 0;">åœ¨æ ¡å­¦ç”Ÿ</p>
                        <h3 style="font-size: 2rem; font-weight: 700; color: #4299e1; margin: 0.3rem 0;">
                            <span id="student-count">--</span>
                        </h3>
                    </div>
                    <div style="width: 40px; height: 40px; background: #4299e1; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white;">
                        ğŸ‘¥
                    </div>
                </div>
                <a href="{% url 'students:student_profile_list' %}" style="color: #4299e1; font-size: 0.9rem; text-decoration: none;">
                    æŸ¥çœ‹è¯¦æƒ… â†’
                </a>
            </div>

            <div class="stat-card" style="background: #fdf2f8; border-radius: 0.8rem; padding: 1.5rem; border: 1px solid #fef7fb;">
                <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 1rem;">
                    <div>
                        <p style="color: var(--text-secondary); font-size: 0.95rem; margin: 0;">å¼€è®¾è¯¾ç¨‹</p>
                        <h3 style="font-size: 2rem; font-weight: 700; color: #9f7aea; margin: 0.3rem 0;">
                            <span id="course-count">--</span>
                        </h3>
                    </div>
                    <div style="width: 40px; height: 40px; background: #9f7aea; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white;">
                        ğŸ“š
                    </div>
                </div>
                <a href="{% url 'students:course_list' %}" style="color: #9f7aea; font-size: 0.9rem; text-decoration: none;">
                    æŸ¥çœ‹è¯¦æƒ… â†’
                </a>
            </div>

            <div class="stat-card" style="background: #eaf6fa; border-radius: 0.8rem; padding: 1.5rem; border: 1px solid #e8f4f8;">
                <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 1rem;">
                    <div>
                        <p style="color: var(--text-secondary); font-size: 0.95rem; margin: 0;">é™¢ç³»ä¸“ä¸š</p>
                        <h3 style="font-size: 2rem; font-weight: 700; color: #38b2ac; margin: 0.3rem 0;">
                            <span id="department-count">--</span>
                        </h3>
                    </div>
                    <div style="width: 40px; height: 40px; background: #38b2ac; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white;">
                        ğŸ¢
                    </div>
                </div>
                <a href="{% url 'students:department_list' %}" style="color: #38b2ac; font-size: 0.9rem; text-decoration: none;">
                    æŸ¥çœ‹è¯¦æƒ… â†’
                </a>
            </div>

            <div class="stat-card" style="background: #f7f3e9; border-radius: 0.8rem; padding: 1.5rem; border: 1px solid #faf6ed;">
                <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 1rem;">
                    <div>
                        <p style="color: var(--text-secondary); font-size: 0.95rem; margin: 0;">æˆ‘çš„èº«ä»½</p>
                        <h3 style="font-size: 2rem; font-weight: 700; color: #ed8936; margin: 0.3rem 0;">
                            <span id="user-role">--</span>
                        </h3>
                    </div>
                    <div style="width: 40px; height: 40px; background: #ed8936; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white;">
                        ğŸ§‘â€ğŸ’¼
                    </div>
                </div>
                <a href="{% url 'accounts:profile' %}" style="color: #ed8936; font-size: 0.9rem; text-decoration: none;">
                    ä¸ªäººä¸­å¿ƒ â†’
                </a>
            </div>
        </div>

        <!-- æ ¸å¿ƒåŠŸèƒ½åŒº -->
        <div style="margin-bottom: 3rem;">
            <h2 style="color: var(--text-primary); font-size: 1.6rem; margin-bottom: 1.8rem; font-weight: 600; padding-bottom: 0.5rem; border-bottom: 2px solid #f0f0f0;">
                æ ¸å¿ƒåŠŸèƒ½
            </h2>

            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 1.5rem;">
                <!-- å­¦ç”Ÿç®¡ç† -->
                <div class="func-card" style="background: white; border-radius: 0.8rem; box-shadow: 0 2px 8px rgba(0,0,0,0.08); padding: 1.8rem; transition: transform 0.3s ease;">
                    <div style="display: flex; align-items: center; margin-bottom: 1.2rem;">
                        <div style="width: 50px; height: 50px; background: linear-gradient(135deg, #4299e1, #63b3ed); border-radius: 0.5rem; display: flex; align-items: center; justify-content: center; font-size: 1.5rem; color: white; margin-right: 1rem;">
                            ğŸ‘¥
                        </div>
                        <h3 style="font-size: 1.25rem; color: var(--text-primary); margin: 0; font-weight: 600;">å­¦ç”Ÿç®¡ç†</h3>
                    </div>
                    <p style="color: var(--text-secondary); font-size: 0.95rem; line-height: 1.5; margin-bottom: 1.5rem;">
                        å­¦ç”Ÿæ¡£æ¡ˆç»´æŠ¤ã€ä¿¡æ¯æŸ¥è¯¢ã€å­¦ç±ç®¡ç†ã€æ•°æ®ç»Ÿè®¡åˆ†æ
                    </p>
                    <div style="display: flex; gap: 0.8rem; flex-wrap: wrap;">
                        <a href="{% url 'students:student_profile_list' %}" class="btn btn-sm" style="background: #4299e1; color: white; padding: 0.5rem 1rem; font-size: 0.9rem;">
                            æ¡£æ¡ˆåˆ—è¡¨
                        </a>
                        {% if user.role == 'admin' %}
                        <a href="{% url 'students:student_profile_create' %}" class="btn btn-sm" style="background: white; color: #4299e1; border: 1px solid #4299e1; padding: 0.5rem 1rem; font-size: 0.9rem;">
                            æ·»åŠ å­¦ç”Ÿ
                        </a>
                        {% endif %}
                    </div>
                </div>

                <!-- è¯¾ç¨‹ç®¡ç† -->
                <div class="func-card" style="background: white; border-radius: 0.8rem; box-shadow: 0 2px 8px rgba(0,0,0,0.08); padding: 1.8rem; transition: transform 0.3s ease;">
                    <div style="display: flex; align-items: center; margin-bottom: 1.2rem;">
                        <div style="width: 50px; height: 50px; background: linear-gradient(135deg, #9f7aea, #b794f4); border-radius: 0.5rem; display: flex; align-items: center; justify-content: center; font-size: 1.5rem; color: white; margin-right: 1rem;">
                            ğŸ“š
                        </div>
                        <h3 style="font-size: 1.25rem; color: var(--text-primary); margin: 0; font-weight: 600;">è¯¾ç¨‹ç®¡ç†</h3>
                    </div>
                    <p style="color: var(--text-secondary); font-size: 0.95rem; line-height: 1.5; margin-bottom: 1.5rem;">
                        è¯¾ç¨‹ä¿¡æ¯ç»´æŠ¤ã€é€‰è¯¾ç®¡ç†ã€æˆç»©å½•å…¥ã€å­¦åˆ†ç»Ÿè®¡
                    </p>
                    <div style="display: flex; gap: 0.8rem; flex-wrap: wrap;">
                        {% if user.role == 'admin' %}
                        <a href="{% url 'students:course_list' %}" class="btn btn-sm" style="background: #9f7aea; color: white; padding: 0.5rem 1rem; font-size: 0.9rem;">
                            è¯¾ç¨‹ç®¡ç†
                        </a>
                        <a href="{% url 'students:enrollment_grade_list' %}" class="btn btn-sm" style="background: white; color: #9f7aea; border: 1px solid #9f7aea; padding: 0.5rem 1rem; font-size: 0.9rem;">
                            æˆç»©ç®¡ç†
                        </a>
                        {% elif user.role == 'student' %}
                        <a href="{% url 'students:course_selection' %}" class="btn btn-sm" style="background: #9f7aea; color: white; padding: 0.5rem 1rem; font-size: 0.9rem;">
                            é€‰è¯¾ä¸­å¿ƒ
                        </a>
                        <a href="{% url 'students:my_enrollments' %}" class="btn btn-sm" style="background: white; color: #9f7aea; border: 1px solid #9f7aea; padding: 0.5rem 1rem; font-size: 0.9rem;">
                            æˆ‘çš„è¯¾ç¨‹
                        </a>
                        {% endif %}
                    </div>
                </div>

                <!-- é™¢ç³»ä¸“ä¸š -->
                <div class="func-card" style="background: white; border-radius: 0.8rem; box-shadow: 0 2px 8px rgba(0,0,0,0.08); padding: 1.8rem; transition: transform 0.3s ease;">
                    <div style="display: flex; align-items: center; margin-bottom: 1.2rem;">
                        <div style="width: 50px; height: 50px; background: linear-gradient(135deg, #38b2ac, #48bb78); border-radius: 0.5rem; display: flex; align-items: center; justify-content: center; font-size: 1.5rem; color: white; margin-right: 1rem;">
                            ğŸ¢
                        </div>
                        <h3 style="font-size: 1.25rem; color: var(--text-primary); margin: 0; font-weight: 600;">é™¢ç³»ä¸“ä¸š</h3>
                    </div>
                    <p style="color: var(--text-secondary); font-size: 0.95rem; line-height: 1.5; margin-bottom: 1.5rem;">
                        é™¢ç³»æ¶æ„ç®¡ç†ã€ä¸“ä¸šè®¾ç½®ã€ç­çº§ä¿¡æ¯ç»´æŠ¤
                    </p>
                    <div style="display: flex; gap: 0.8rem; flex-wrap: wrap;">
                        <a href="{% url 'students:department_list' %}" class="btn btn-sm" style="background: #38b2ac; color: white; padding: 0.5rem 1rem; font-size: 0.9rem;">
                            é™¢ç³»åˆ—è¡¨
                        </a>
                        {% if user.role == 'admin' %}
                        <a href="{% url 'students:major_list' %}" class="btn btn-sm" style="background: white; color: #38b2ac; border: 1px solid #38b2ac; padding: 0.5rem 1rem; font-size: 0.9rem;">
                            ä¸“ä¸šç®¡ç†
                        </a>
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>

        <!-- ç®¡ç†å‘˜ä¸“å±åŠŸèƒ½ -->
        {% if user.role == 'admin' %}
        <div style="margin-bottom: 3rem;">
            <h2 style="color: var(--text-primary); font-size: 1.6rem; margin-bottom: 1.8rem; font-weight: 600; padding-bottom: 0.5rem; border-bottom: 2px solid #f0f0f0;">
                ç³»ç»Ÿç®¡ç†
            </h2>

            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 1.5rem;">
                <div class="admin-card" style="background: #f8f9fa; border-radius: 0.8rem; padding: 1.8rem; border: 1px solid #e9ecef;">
                    <div style="display: flex; align-items: center; margin-bottom: 1.2rem;">
                        <div style="width: 45px; height: 45px; background: #e53e3e; border-radius: 0.5rem; display: flex; align-items: center; justify-content: center; font-size: 1.3rem; color: white; margin-right: 1rem;">
                            ğŸ‘¤
                        </div>
                        <h3 style="font-size: 1.15rem; color: var(--text-primary); margin: 0; font-weight: 600;">ç”¨æˆ·ç®¡ç†</h3>
                    </div>
                    <p style="color: var(--text-secondary); font-size: 0.9rem; line-height: 1.5; margin-bottom: 1.2rem;">
                        ç³»ç»Ÿç”¨æˆ·è´¦æˆ·ç®¡ç†ã€è§’è‰²æƒé™åˆ†é…ã€è´¦å·çŠ¶æ€æ§åˆ¶
                    </p>
                    <a href="{% url 'accounts:user_list' %}" class="btn btn-sm" style="background: #e53e3e; color: white; padding: 0.5rem 1.2rem; font-size: 0.9rem;">
                        ç®¡ç†ç”¨æˆ·
                    </a>
                </div>

                <div class="admin-card" style="background: #f8f9fa; border-radius: 0.8rem; padding: 1.8rem; border: 1px solid #e9ecef;">
                    <div style="display: flex; align-items: center; margin-bottom: 1.2rem;">
                        <div style="width: 45px; height: 45px; background: #48bb78; border-radius: 0.5rem; display: flex; align-items: center; justify-content: center; font-size: 1.3rem; color: white; margin-right: 1rem;">
                            ğŸ“Š
                        </div>
                        <h3 style="font-size: 1.15rem; color: var(--text-primary); margin: 0; font-weight: 600;">æ•°æ®æŠ¥è¡¨</h3>
                    </div>
                    <p style="color: var(--text-secondary); font-size: 0.9rem; line-height: 1.5; margin-bottom: 1.2rem;">
                        å­¦ç”Ÿæ•°æ®ç»Ÿè®¡ã€è¯¾ç¨‹åˆ†ææŠ¥è¡¨ã€ç³»ç»Ÿæ•°æ®å¯¼å‡º
                    </p>
                    <button onclick="exportData()" class="btn btn-sm" style="background: #48bb78; color: white; padding: 0.5rem 1.2rem; font-size: 0.9rem; border: none; cursor: pointer;">
                        å¯¼å‡ºæŠ¥è¡¨
                    </button>
                </div>

                <div class="admin-card" style="background: #f8f9fa; border-radius: 0.8rem; padding: 1.8rem; border: 1px solid #e9ecef;">
                    <div style="display: flex; align-items: center; margin-bottom: 1.2rem;">
                        <div style="width: 45px; height: 45px; background: #4299e1; border-radius: 0.5rem; display: flex; align-items: center; justify-content: center; font-size: 1.3rem; color: white; margin-right: 1rem;">
                            âš™ï¸
                        </div>
                        <h3 style="font-size: 1.15rem; color: var(--text-primary); margin: 0; font-weight: 600;">ç³»ç»Ÿé…ç½®</h3>
                    </div>
                    <p style="color: var(--text-secondary); font-size: 0.9rem; line-height: 1.5; margin-bottom: 1.2rem;">
                        ç³»ç»Ÿå‚æ•°è®¾ç½®ã€åŸºç¡€æ•°æ®ç»´æŠ¤ã€æ“ä½œæ—¥å¿—æŸ¥çœ‹
                    </p>
                    <a href="{% url 'accounts:admin_dashboard' %}" class="btn btn-sm" style="background: #4299e1; color: white; padding: 0.5rem 1.2rem; font-size: 0.9rem;">
                        ç³»ç»Ÿè®¾ç½®
                    </a>
                </div>
            </div>
        </div>
        {% endif %}

        <!-- å¿«æ·æ“ä½œæ  -->
        <div style="background: #f8f9fa; border-radius: 0.8rem; padding: 1.5rem; margin-bottom: 2rem;">
            <h3 style="color: var(--text-primary); font-size: 1.1rem; margin-bottom: 1.2rem; font-weight: 600;">
                å¿«æ·æ“ä½œ
            </h3>
            <div style="display: flex; flex-wrap: wrap; gap: 0.8rem;">
                <a href="{% url 'students:student_profile_list' %}" class="quick-btn" style="padding: 0.6rem 1.2rem; background: white; border: 1px solid #e0e0e0; border-radius: 0.4rem; color: var(--text-primary); text-decoration: none; font-size: 0.9rem; display: flex; align-items: center; gap: 0.5rem;">
                    ğŸ‘¥ å­¦ç”Ÿæ¡£æ¡ˆ
                </a>
                <a href="{% url 'students:course_list' %}" class="quick-btn" style="padding: 0.6rem 1.2rem; background: white; border: 1px solid #e0e0e0; border-radius: 0.4rem; color: var(--text-primary); text-decoration: none; font-size: 0.9rem; display: flex; align-items: center; gap: 0.5rem;">
                    ğŸ“š è¯¾ç¨‹ç®¡ç†
                </a>
                <a href="{% url 'students:department_list' %}" class="quick-btn" style="padding: 0.6rem 1.2rem; background: white; border: 1px solid #e0e0e0; border-radius: 0.4rem; color: var(--text-primary); text-decoration: none; font-size: 0.9rem; display: flex; align-items: center; gap: 0.5rem;">
                    ğŸ¢ é™¢ç³»ä¿¡æ¯
                </a>
                <a href="{% url 'accounts:profile' %}" class="quick-btn" style="padding: 0.6rem 1.2rem; background: white; border: 1px solid #e0e0e0; border-radius: 0.4rem; color: var(--text-primary); text-decoration: none; font-size: 0.9rem; display: flex; align-items: center; gap: 0.5rem;">
                    ğŸ§‘â€ğŸ’¼ ä¸ªäººä¸­å¿ƒ
                </a>
                {% if user.role == 'admin' %}
                <a href="{% url 'accounts:admin_dashboard' %}" class="quick-btn" style="padding: 0.6rem 1.2rem; background: white; border: 1px solid #e0e0e0; border-radius: 0.4rem; color: var(--text-primary); text-decoration: none; font-size: 0.9rem; display: flex; align-items: center; gap: 0.5rem;">
                    âš™ï¸ ç³»ç»Ÿç®¡ç†
                </a>
                {% endif %}
            </div>
        </div>

    {% else %}
        <!-- æœªç™»å½•ç”¨æˆ·åŠŸèƒ½å±•ç¤º -->
        <div style="margin-bottom: 3rem;">
            <h2 style="color: var(--text-primary); font-size: 1.6rem; margin-bottom: 1.8rem; font-weight: 600; text-align: center;">
                åŠŸèƒ½ç‰¹è‰²
            </h2>

            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 1.8rem;">
                <div class="feature-card" style="background: white; border-radius: 0.8rem; box-shadow: 0 3px 10px rgba(0,0,0,0.05); padding: 2rem; border-top: 4px solid #4299e1;">
                    <div style="width: 60px; height: 60px; background: #e8f4f8; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 1.8rem; color: #4299e1; margin: 0 auto 1.2rem;">
                        ğŸ‘¥
                    </div>
                    <h3 style="font-size: 1.3rem; color: var(--text-primary); margin-bottom: 1rem; text-align: center; font-weight: 600;">
                        å­¦ç”Ÿæ¡£æ¡ˆç®¡ç†
                    </h3>
                    <ul style="color: var(--text-secondary); line-height: 1.6; font-size: 0.95rem; padding-left: 1.2rem;">
                        <li>å®Œæ•´çš„å­¦ç”Ÿä¿¡æ¯æ¡£æ¡ˆç»´æŠ¤</li>
                        <li>é«˜çº§æœç´¢ä¸å¤šç»´åº¦ç­›é€‰</li>
                        <li>æ‰¹é‡å¯¼å…¥å¯¼å‡ºä¸æ•°æ®å¤‡ä»½</li>
                        <li>å­¦ç±çŠ¶æ€è·Ÿè¸ªä¸ç®¡ç†</li>
                    </ul>
                </div>

                <div class="feature-card" style="background: white; border-radius: 0.8rem; box-shadow: 0 3px 10px rgba(0,0,0,0.05); padding: 2rem; border-top: 4px solid #9f7aea;">
                    <div style="width: 60px; height: 60px; background: #fdf2f8; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 1.8rem; color: #9f7aea; margin: 0 auto 1.2rem;">
                        ğŸ“š
                    </div>
                    <h3 style="font-size: 1.3rem; color: var(--text-primary); margin-bottom: 1rem; text-align: center; font-weight: 600;">
                        æ™ºèƒ½é€‰è¯¾ç³»ç»Ÿ
                    </h3>
                    <ul style="color: var(--text-secondary); line-height: 1.6; font-size: 0.95rem; padding-left: 1.2rem;">
                        <li>åœ¨çº¿é€‰è¯¾/é€€è¯¾ä¸€ä½“åŒ–æ“ä½œ</li>
                        <li>æˆç»©å½•å…¥ä¸è‡ªåŠ¨ç»Ÿè®¡åˆ†æ</li>
                        <li>å­¦åˆ†ç®¡ç†ä¸æ¯•ä¸šå®¡æ ¸</li>
                        <li>è¯¾ç¨‹èµ„æºåœ¨çº¿ç®¡ç†</li>
                    </ul>
                </div>

                <div class="feature-card" style="background: white; border-radius: 0.8rem; box-shadow: 0 3px 10px rgba(0,0,0,0.05); padding: 2rem; border-top: 4px solid #38b2ac;">
                    <div style="width: 60px; height: 60px; background: #eaf6fa; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 1.8rem; color: #38b2ac; margin: 0 auto 1.2rem;">
                        ğŸ”
                    </div>
                    <h3 style="font-size: 1.3rem; color: var(--text-primary); margin-bottom: 1rem; text-align: center; font-weight: 600;">
                        å®‰å…¨æƒé™ä½“ç³»
                    </h3>
                    <ul style="color: var(--text-secondary); line-height: 1.6; font-size: 0.95rem; padding-left: 1.2rem;">
                        <li>å¤šè§’è‰²ç²¾ç»†åŒ–æƒé™æ§åˆ¶</li>
                        <li>æ“ä½œæ—¥å¿—å…¨ç¨‹è®°å½•</li>
                        <li>æ•°æ®åŠ å¯†ä¸å®‰å…¨é˜²æŠ¤</li>
                        <li>åˆ†çº§ç®¡ç†ä¸å®¡æ‰¹æµç¨‹</li>
                    </ul>
                </div>
            </div>
        </div>
    {% endif %}
</div>

<!-- é¡µé¢è„šæœ¬ -->
<script>
// è·å–ç»Ÿè®¡æ•°æ®
async function loadStats() {
    try {
        setTimeout(() => {
            document.getElementById('student-count').textContent = '1,234';
            document.getElementById('course-count').textContent = '89';
            document.getElementById('department-count').textContent = '12';

            const userRole = '{{ user.role|default:"" }}';
            const roleText = userRole === 'admin' ? 'ç®¡ç†å‘˜' : userRole === 'student' ? 'å­¦ç”Ÿ' : 'ç”¨æˆ·';
            document.getElementById('user-role').textContent = roleText;
        }, 500);
    } catch (error) {
        console.error('Failed to load stats:', error);
    }
}

// å¯¼å‡ºæ•°æ®åŠŸèƒ½
function exportData() {
    showToast('æ­£åœ¨å‡†å¤‡å¯¼å‡ºæ•°æ®...', 'info');
    setTimeout(() => {
        showToast('æ•°æ®å¯¼å‡ºå®Œæˆï¼', 'success');
    }, 1500);
}

// æ˜¾ç¤ºæç¤ºä¿¡æ¯
function showToast(message, type = 'info') {
    const toast = document.createElement('div');
    toast.className = `alert alert-${type}`;
    toast.style.cssText = `
        position: fixed;
        top: 20px;
        right: 20px;
        z-index: 9999;
        min-width: 250px;
        padding: 1rem 1.5rem;
        opacity: 0;
        transform: translateX(100%);
        transition: all 0.3s ease;
        border-radius: 0.5rem;
        box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        background: ${type === 'success' ? '#48bb78' : type === 'error' ? '#e53e3e' : '#4299e1'};
        color: white;
    `;
    toast.innerHTML = message;

    document.body.appendChild(toast);

    setTimeout(() => {
        toast.style.opacity = '1';
        toast.style.transform = 'translateX(0)';
    }, 100);

    setTimeout(() => {
        toast.style.opacity = '0';
        toast.style.transform = 'translateX(100%)';
        setTimeout(() => {
            if (toast.parentNode) {
                toast.parentNode.removeChild(toast);
            }
        }, 300);
    }, 3000);
}

// é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
document.addEventListener('DOMContentLoaded', function() {
    // åŠ è½½ç»Ÿè®¡æ•°æ®
    if (document.getElementById('student-count')) {
        loadStats();
    }

    // åŠŸèƒ½å¡ç‰‡æ‚¬åœæ•ˆæœ
    const funcCards = document.querySelectorAll('.func-card, .admin-card, .feature-card');
    funcCards.forEach(card => {
        card.addEventListener('mouseenter', () => {
            card.style.transform = 'translateY(-5px)';
            card.style.boxShadow = '0 8px 24px rgba(0,0,0,0.1)';
        });
        card.addEventListener('mouseleave', () => {
            card.style.transform = 'translateY(0)';
            card.style.boxShadow = card.classList.contains('feature-card') ? '0 3px 10px rgba(0,0,0,0.05)' : '0 2px 8px rgba(0,0,0,0.08)';
        });
    });

    // å¿«æ·æŒ‰é’®æ‚¬åœæ•ˆæœ
    const quickBtns = document.querySelectorAll('.quick-btn');
    quickBtns.forEach(btn => {
        btn.addEventListener('mouseenter', () => {
            btn.style.background = '#f0f0f0';
            btn.style.borderColor = '#d0d0d0';
        });
        btn.addEventListener('mouseleave', () => {
            btn.style.background = 'white';
            btn.style.borderColor = '#e0e0e0';
        });
    });

    // æ•°æ®å¡ç‰‡åŠ¨ç”»
    const statCards = document.querySelectorAll('.stat-card');
    statCards.forEach((card, index) => {
        setTimeout(() => {
            card.style.opacity = '1';
            card.style.transform = 'translateY(0)';
        }, 100 * index);
    });
});
</script>

<style>
/* åŸºç¡€æ ·å¼ä¼˜åŒ– */
:root {
    --primary: #4299e1;
    --primary-light: #63b3ed;
    --text-primary: #2d3748;
    --text-secondary: #718096;
    --bg-primary: #ffffff;
    --bg-secondary: #f8f9fa;
    --border-color: #e2e8f0;
    --danger: #e53e3e;
    --success: #48bb78;
    --warning: #ed8936;
}

/* è‹±é›„åŒºåŸŸåŠ¨ç”» */
.hero-section {
    animation: heroGradient 8s ease infinite;
    background-size: 200% 200%;
}

@keyframes heroGradient {
    0% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
    100% { background-position: 0% 50%; }
}

.hero-section::before {
    content: '';
    position: absolute;
    top: -50%;
    left: -50%;
    width: 200%;
    height: 200%;
    background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
    animation: rotate 20s linear infinite;
}

@keyframes rotate {
    from { transform: rotate(0deg); }
    to { transform: rotate(360deg); }
}

/* ç»Ÿè®¡å¡ç‰‡åˆå§‹çŠ¶æ€ */
.stat-card {
    opacity: 0;
    transform: translateY(20px);
    transition: all 0.4s ease;
}

/* åŠŸèƒ½å¡ç‰‡æ ·å¼ */
.func-card {
    transition: all 0.3s ease;
}

/* å“åº”å¼ä¼˜åŒ– */
@media (max-width: 768px) {
    .hero-section {
        padding: 2rem 1.5rem;
    }
    
    .hero-section h1 {
        font-size: 1.8rem;
    }
    
    .stat-card {
        padding: 1.2rem;
    }
    
    .stat-card h3 {
        font-size: 1.8rem;
    }
    
    .func-card, .admin-card, .feature-card {
        padding: 1.5rem;
    }
    
    .quick-btn {
        flex: 1;
        min-width: 120px;
        justify-content: center;
    }
}

/* æ‰“å°æ ·å¼ */
@media print {
    .hero-section {
        background: white;
        color: black;
        border: 2px solid #ddd;
    }
    
    .quick-actions, .stat-card, .admin-card {
        display: none;
    }
}
</style>
{% endblock %}