# Django 学生管理系统 - 团队共享使用指南

## 概述
本项目已配置为支持团队成员共享用户数据，所有成员可以访问同一个数据库和用户系统。

## 配置说明

### 1. 共享数据库
- **数据库文件**: `shared_data/team_shared.db`
- **位置**: 项目根目录的 `shared_data` 文件夹
- **类型**: SQLite3 (已优化支持多用户并发访问)

### 2. 用户角色系统
- **管理员 (admin)**: 完全访问权限
- **教师 (teacher)**: 教学相关权限
- **学生 (student)**: 学生权限

### 3. 网络访问
- **支持局域网访问**: 已配置允许外部IP访问
- **端口**: 8000 (默认)

## 使用方法

### 启动服务器
```bash
# 进入项目目录
cd D:\xue\sanshang\pbl5\claude\django-student-management\student_management

# 启动开发服务器
python manage.py runserver 0.0.0.0:8000
```

### 团队成员访问
1. **确保项目文件夹共享**: 所有团队成员需要能访问项目文件夹
2. **获取服务器IP地址**: 运行服务器的主机IP地址
3. **访问地址**: `http://[服务器IP]:8000`

例如：`http://192.168.1.100:8000`

### 测试账号
| 用户类型 | 用户名 | 密码 | 权限 |
|---------|--------|------|------|
| 管理员 | admin | admin123 | 完全权限 |
| 教师 | teacher | teacher123 | 教学权限 |
| 学生 | student | student123 | 学生权限 |
| 教师 | wang_teacher | wang123 | 教学权限 |
| 教师 | li_teacher | li123 | 教学权限 |
| 学生 | zhang_student | zhang123 | 学生权限 |
| 学生 | li_student | li123 | 学生权限 |
| 学生 | wang_student | wang123 | 学生权限 |

## 技术配置详情

### 数据库配置
```python
DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.sqlite3',
        'NAME': SHARED_DB_PATH,  # 共享数据库路径
        'OPTIONS': {
            'timeout': 30,           # 30秒超时
            'check_same_thread': False,  # 允许多线程
        },
        'CONN_MAX_AGE': 60,  # 连接池
    }
}
```

### 会话配置
- **会话存储**: 数据库存储 (支持多实例共享)
- **会话时长**: 24小时
- **配置**: `SESSION_ENGINE = 'django.contrib.sessions.backends.db'`

### 缓存配置
- **缓存类型**: 文件缓存
- **缓存位置**: `shared_data/cache/`

## 注意事项

### 1. 文件权限
- 确保 `shared_data` 目录对所有用户可读写
- 数据库文件 `team_shared.db` 需要共享读写权限

### 2. 网络配置
- 开发环境使用 `0.0.0.0:8000` 允许所有IP访问
- 生产环境应配置具体的IP地址
- 确保防火墙允许8000端口访问

### 3. 并发访问
- SQLite支持多读，写入时会有锁定
- 适合小团队共享使用
- 大团队建议使用PostgreSQL或MySQL

### 4. 数据安全
- 定期备份 `team_shared.db` 文件
- 建议使用版本控制管理代码变更
- 敏感信息不要存储在代码中

## 故障排除

### 常见问题

1. **数据库锁定错误**
   - 确保没有其他进程正在写入数据库
   - 检查文件权限

2. **无法访问服务器**
   - 检查IP地址配置
   - 确认防火墙设置
   - 验证网络连通性

3. **用户登录问题**
   - 检查用户是否已创建
   - 验证密码是否正确
   - 查看日志文件

### 日志查看
- **日志位置**: `shared_data/django.log`
- **日志级别**: INFO及以上
- **包含**: 用户操作、错误信息等

## 扩展建议

### 生产环境升级
1. **数据库升级**: 迁移到PostgreSQL/MySQL
2. **Web服务器**: 使用Nginx + Gunicorn
3. **安全配置**: HTTPS、防火墙等
4. **负载均衡**: 多服务器部署

### 功能扩展
1. **用户权限细化**: 基于角色的权限控制
2. **数据导入导出**: 批量用户管理
3. **通知系统**: 邮件/消息通知
4. **数据分析**: 学习统计和报表

## 联系信息
如有问题或建议，请联系项目维护团队。

---
*最后更新: 2025年12月8日*